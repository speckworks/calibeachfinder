{"ast":null,"code":"import _regeneratorRuntime from\"/Users/johnspeck/Flatiron - Labs - etc./githubpages/calibffrontendGH/node_modules/@babel/runtime/regenerator\";import _classCallCheck from\"/Users/johnspeck/Flatiron - Labs - etc./githubpages/calibffrontendGH/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/johnspeck/Flatiron - Labs - etc./githubpages/calibffrontendGH/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/johnspeck/Flatiron - Labs - etc./githubpages/calibffrontendGH/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/johnspeck/Flatiron - Labs - etc./githubpages/calibffrontendGH/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/johnspeck/Flatiron - Labs - etc./githubpages/calibffrontendGH/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import MapContainer from'../src/containers/mapcontainer';import'./index.css';import SearchForm from'../src/components/searchform';import Favbeach from'../src/components/favbeach';import ReviewForm from'../src/components/reviewform';import Reviews from'../src/components/reviews';import Userbeaches from'../src/components/userbeaches';import Login from'./components/Login';import{HashRouter as Router,Route,Link}from'react-router-dom';import Beachchart from'./components/beachchart';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);function App(){var _getPrototypeOf2;var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(App)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={userbeaches:[],qLatLong:{},reviews:[],results:[],rawBeaches:[],displayBeach:[],user:{id:1},geocode:{lat:\"\",long:\"\"},token:localStorage.token,loggedInUserId:localStorage.userId,name:localStorage.name};_this.setToken=function(_ref){var token=_ref.token,user_id=_ref.user_id,name=_ref.name;localStorage.token=token;localStorage.userId=user_id;localStorage.name=name;_this.setState({token:token,loggedInUserId:user_id,name:name});};_this.logOutClick=function(){// localStorage.userId = undefined\n// localStorage.token = undefined\nlocalStorage.clear();_this.setState({loggedInUserId:null,token:null});};_this.addReview=function(reviewRes){var reviews=_this.state.reviews;var filteredReviews=reviews.filter(function(review){return review.id!==reviewRes.id;});filteredReviews.unshift(reviewRes);_this.setState({reviews:filteredReviews});};_this.deleteReview=function(review_id){var url=\"https://mighty-ocean-78254.herokuapp.com/reviews/\".concat(review_id);fetch(url,{method:'DELETE'}).then(function(res){return res.json();}).catch(function(error){return console.error(\"Error:\",error);}).then(function(respObj){var reviews=_this.state.reviews.filter(function(review){return review.id!==review_id;});_this.setState({reviews:reviews});});};_this.grabBeaches=function _callee(QlatLong){var rawBeaches,beaches,newBeaches;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regeneratorRuntime.awrap(fetch('https://mighty-ocean-78254.herokuapp.com/beaches'));case 2:rawBeaches=_context.sent;_context.next=5;return _regeneratorRuntime.awrap(rawBeaches.json());case 5:beaches=_context.sent;newBeaches=beaches.filter(function(beach){return parseFloat(beach.lat)<=QlatLong.lat+.05&&parseFloat(beach.lat)>=QlatLong.lat-.05;});_this.setState({results:newBeaches,rawBeaches:beaches});case 8:case\"end\":return _context.stop();}}});};_this.queryCode=function(responseObj){var QlatLong={};if(responseObj.results.length>0){QlatLong.lat=responseObj.results[0].geometry.location.lat;QlatLong.lng=responseObj.results[0].geometry.location.lng;}else{alert(\"Your Please Resubmit your user Query\");// QlatLong = {lat:37.8591,lng:122.4853}\n}// console.log(\"default\", QlatLong)\n_this.grabBeaches(QlatLong);_this.setState({qLatLong:QlatLong});};_this.displayBeach=function(clickedBeach,props){_this.setState({displayBeach:clickedBeach});// console.log(\"favbeach props\", props)\nprops.history.push('/favbeach');// console.log(\"clickedBeach\",clickedBeach)\n};_this.reviewBeach=function(props,beach_id){if(!!props){props.history.push('/reviews');}else{return React.createElement(\"redirect\",{to:{pathname:\"/reviews\"}});}};_this.updateReview=function(review,newReview){console.log(review,newReview);var review_id=review.id;var reviewPatch={user_id:_this.state.loggedInUserId,beach_id:review.beach_id,review:newReview};var url=\"https://mighty-ocean-78254.herokuapp.com/reviews/\".concat(review_id);fetch(url,{method:'PATCH',body:JSON.stringify(reviewPatch),headers:{'content-type':'application/json'}}).then(function(res){return res.json();}).catch(function(error){return console.error(\"Error:\",error);}).then(function(respObj){return console.log(respObj);});};_this.addBeachtoUBs=function _callee2(props){var beach_id,user_id,name,userbeach,url;return _regeneratorRuntime.async(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _regeneratorRuntime.awrap(parseInt(props.beach.id));case 2:beach_id=_context2.sent;// console.log(\"beach_id\", props.beach.id)\nuser_id=_this.state.loggedInUserId;_context2.next=6;return _regeneratorRuntime.awrap(props.beach.name);case 6:name=_context2.sent;userbeach={beach_id:beach_id,user_id:user_id,name:name};url=\"https://mighty-ocean-78254.herokuapp.com/userbeaches\";fetch(url,{method:'POST',body:JSON.stringify(userbeach),headers:{'content-type':'application/json'}}).then(function(res){return res.json();}).catch(function(error){return console.error(\"Error:\",error);}).then(function(res){console.log('Success:',res);var userbeaches=_this.state.userbeaches;userbeaches.unshift(res);_this.setState({userbeaches:userbeaches});props.history.push('/userbeaches');});case 10:case\"end\":return _context2.stop();}}});};_this.deleteFromUBs=function(beach){var url=\"https://mighty-ocean-78254.herokuapp.com/userbeaches/\".concat(beach.id);fetch(url,{method:'DELETE'}).then(function(res){return res.json();}).catch(function(error){return console.error(\"Error:\",error);}).then(function(respObj){var userbeaches=_this.state.userbeaches.filter(function(userbeach){return userbeach.id!==beach.id;});_this.setState({userbeaches:userbeaches});});};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch(\"https://mighty-ocean-78254.herokuapp.com/reviews\").then(function(res){return res.json();}).catch(function(error){return console.error(\"Error:\",error);}).then(function(resArr){_this2.setState({reviews:resArr});});fetch(\"https://mighty-ocean-78254.herokuapp.com/userbeaches\").then(function(res){return res.json();}).then(function(resArr){_this2.setState({userbeaches:resArr});});}},{key:\"render\",value:function render(){var _this3=this;return React.createElement(Router,null,React.createElement(\"div\",{id:\"title\"},\"CALIFORNIA BEACH FINDER\"),React.createElement(\"div\",null,React.createElement(\"div\",{className:\"navbuttonscontainer\"},React.createElement(Link,{to:\"/\"},React.createElement(\"button\",{className:\"roundbutton\"},\"Beach Finder Mainpage\")),React.createElement(Link,{to:\"/beachchart\"},React.createElement(\"button\",{className:\"roundbutton\"},\"Beach Data Chart\")),React.createElement(Link,{to:\"/userbeaches\"},React.createElement(\"button\",{className:\"roundbutton\"},\"Favorite Beaches\")),React.createElement(Link,{to:\"/reviews\"},React.createElement(\"button\",{className:\"roundbutton\"},\"Reviews\")),!!this.state.token?React.createElement(Login,{token:this.state.token,setToken:this.setToken,loggedInUserId:this.state.loggedInUserId}):React.createElement(Login,{setToken:this.setToken}),React.createElement(React.Fragment,null,!!this.state.token?React.createElement(\"button\",{className:\"roundbutton\",onClick:this.logOutClick},\"Log Out\"):\"\")),React.createElement(Route,{exact:true,path:'/',render:function render(props){return React.createElement(\"div\",{id:\"search-bar\"},React.createElement(SearchForm,Object.assign({},props,{grabBeaches:_this3.grabBeaches,queryCode:_this3.queryCode})));}}),React.createElement(Route,{exact:true,path:'/',render:function render(props){return _this3.state.results.length===0?React.createElement(\"div\",{id:\"map-showcase\"},React.createElement(MapContainer,Object.assign({},props,{beaches:_this3.state.results,qLatLong:_this3.state.qLatLong,displayBeach:_this3.displayBeach}))):React.createElement(\"div\",{id:\"map-showcase\"},React.createElement(MapContainer,Object.assign({},props,{beaches:_this3.state.results,displayBeach:_this3.displayBeach,qLatLong:_this3.state.qLatLong})));}}),React.createElement(Route,{exact:true,path:'/favbeach',render:function render(props){return React.createElement(\"div\",{id:\"fav-beach\"},React.createElement(Favbeach,Object.assign({id:\"favbeach\"},props,{beach:_this3.state.displayBeach,refreshBeaches:_this3.refreshBeaches,addBeachtoUBs:_this3.addBeachtoUBs,userBeaches:_this3.userBeaches})));}}),React.createElement(Route,{exact:true,path:'/userbeaches',render:function render(props){return React.createElement(\"div\",{id:\"userbeaches\"},React.createElement(Userbeaches,Object.assign({},props,{userbeaches:_this3.state.userbeaches,deleteFromUBs:_this3.deleteFromUBs,returnHome:_this3.returnHome,reviewBeach:_this3.reviewBeach,user_id:_this3.state.loggedInUserId,rawBeaches:_this3.state.rawBeaches})));}}),React.createElement(Route,{exact:true,path:'/reviews',render:function render(props){return React.createElement(\"div\",{id:\"reviewform roundbutton\"},React.createElement(ReviewForm,Object.assign({},props,{displayBeach:_this3.state.displayBeach,addReview:_this3.addReview,returnHome:_this3.returnHome,user_id:_this3.state.loggedInUserId})));}}),React.createElement(Route,{exact:true,path:'/reviews',render:function render(props){return React.createElement(\"div\",{id:\"reviews\"},React.createElement(Reviews,Object.assign({},props,{reviews:_this3.state.reviews,beaches:_this3.state.results,deleteReview:_this3.deleteReview,updateReview:_this3.updateReview,user_id:_this3.state.loggedInUserId})));}}),React.createElement(Route,{exact:true,path:'/beachchart',render:function render(props){return React.createElement(\"div\",{id:\"beachchart\"},React.createElement(Beachchart,Object.assign({},props,{rawBeaches:_this3.state.rawBeaches})));}})));}}]);return App;}(Component);export{App as default};","map":{"version":3,"sources":["/Users/johnspeck/Flatiron - Labs - etc./githubpages/calibffrontendGH/src/App.js"],"names":["React","Component","MapContainer","SearchForm","Favbeach","ReviewForm","Reviews","Userbeaches","Login","HashRouter","Router","Route","Link","Beachchart","App","state","userbeaches","qLatLong","reviews","results","rawBeaches","displayBeach","user","id","geocode","lat","long","token","localStorage","loggedInUserId","userId","name","setToken","user_id","setState","logOutClick","clear","addReview","reviewRes","filteredReviews","filter","review","unshift","deleteReview","review_id","url","fetch","method","then","res","json","catch","error","console","respObj","grabBeaches","QlatLong","beaches","newBeaches","beach","parseFloat","queryCode","responseObj","length","geometry","location","lng","alert","clickedBeach","props","history","push","reviewBeach","beach_id","pathname","updateReview","newReview","log","reviewPatch","body","JSON","stringify","headers","addBeachtoUBs","parseInt","userbeach","deleteFromUBs","resArr","refreshBeaches","userBeaches","returnHome"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport MapContainer from '../src/containers/mapcontainer'\nimport './index.css';\nimport SearchForm from '../src/components/searchform'\nimport Favbeach from '../src/components/favbeach'\nimport ReviewForm from '../src/components/reviewform'\nimport Reviews from '../src/components/reviews'\nimport Userbeaches from '../src/components/userbeaches'\nimport Login from './components/Login'\nimport { HashRouter as Router, Route, Link } from 'react-router-dom';\nimport Beachchart from './components/beachchart'\n\n\n\nexport default class App extends Component {\n    state = {\n        userbeaches:[],\n        qLatLong:{},\n        reviews:[],\n        results:[],\n        rawBeaches:[],\n        displayBeach:[],\n        user: {\n            id: 1\n            },\n        geocode:{lat:\"\",\n                long:\"\"\n            },\n        token:localStorage.token,\n        loggedInUserId:localStorage.userId,\n        name:localStorage.name\n    }\n   \n    componentDidMount(){\n        fetch(\"https://mighty-ocean-78254.herokuapp.com/reviews\")\n        .then(res=> res.json())\n        .catch(error=>console.error(\"Error:\", error))\n        .then(resArr=>{\n            this.setState({reviews:resArr})\n        })\n\n        fetch(\"https://mighty-ocean-78254.herokuapp.com/userbeaches\")\n        .then(res=> res.json())\n        .then(resArr=>{\n            this.setState({userbeaches:resArr})\n        })\n    }\n\n    \n    setToken = ({token, user_id, name}) => {\n        localStorage.token = token\n        localStorage.userId = user_id\n        localStorage.name = name\n        \n        this.setState({\n            token:token,\n            loggedInUserId:user_id,\n            name:name\n        })\n    }\n    \n    logOutClick = () => {\n        // localStorage.userId = undefined\n        // localStorage.token = undefined\n        localStorage.clear()\n        this.setState({\n            loggedInUserId: null,\n            token: null\n        })\n    }\n    \n\n    addReview = (reviewRes) => {\n        let reviews = this.state.reviews\n        let filteredReviews = reviews.filter(review => review.id !== reviewRes.id )\n        filteredReviews.unshift(reviewRes)\n        this.setState({reviews:filteredReviews})\n    }\n   \n    deleteReview = (review_id) => {\n                            const url = `https://mighty-ocean-78254.herokuapp.com/reviews/${review_id}`\n                            fetch(url, {method: 'DELETE'})\n                            .then(res=>res.json())\n                            .catch(error=>console.error(\"Error:\", error))\n                            .then(respObj=>{\n                                let reviews = this.state.reviews.filter(review => review.id !== review_id)\n                                this.setState({reviews:reviews})\n                            })  \n                        }\n                        \n    grabBeaches = async (QlatLong) => {\n        let rawBeaches = await fetch('https://mighty-ocean-78254.herokuapp.com/beaches')\n        let beaches = await rawBeaches.json()\n        let newBeaches = beaches.filter(beach => {\n            return parseFloat(beach.lat) <= QlatLong.lat+.05 && \n            parseFloat(beach.lat) >= QlatLong.lat-.05\n        })\n        this.setState({results:newBeaches,\n                        rawBeaches:beaches})\n    }\n    \n\n\n\n    queryCode = (responseObj) => {\n        let QlatLong = {}\n        if (responseObj.results.length >0){\n            QlatLong.lat = responseObj.results[0].geometry.location.lat\n            QlatLong.lng =  responseObj.results[0].geometry.location.lng\n        }else{\n            alert(\"Your Please Resubmit your user Query\")\n            // QlatLong = {lat:37.8591,lng:122.4853}\n        }\n            // console.log(\"default\", QlatLong)\n        this.grabBeaches(QlatLong)\n        this.setState({qLatLong:QlatLong})\n    }\n\n    displayBeach = (clickedBeach, props) => {\n        this.setState({displayBeach:clickedBeach})\n        // console.log(\"favbeach props\", props)\n        props.history.push('/favbeach')\n        // console.log(\"clickedBeach\",clickedBeach)\n    }\n\n    // userBeaches = (props) =>{\n    //     return <Link to='/userbeaches'>Userbeaches</Link>\n    //     // props.history.push('/userbeaches')\n    // }\n\n    // returnHome = (props) =>{\n    //     props.history.push('/')\n    // }\n    \n                         \n    reviewBeach = (props, beach_id) => {\n        if (!!props){\n        props.history.push('/reviews')\n        }else{\n            return < redirect to={{ pathname: \"/reviews\" }} />\n        }\n    }\n\n\n    // refreshBeaches = (event) => {\n    //     this.setState({displayBeach:[]})\n    // }\n    \n    updateReview = (review, newReview) => {\n        console.log(review, newReview)\n        let review_id = review.id\n        let reviewPatch = {user_id:this.state.loggedInUserId, beach_id:review.beach_id, review:newReview}\n        const url = `https://mighty-ocean-78254.herokuapp.com/reviews/${review_id}`\n        fetch(url, {method:'PATCH',\n            body:JSON.stringify(reviewPatch),\n            headers: {'content-type':'application/json'}\n            })\n        .then(res=>res.json())\n        .catch(error=>console.error(\"Error:\", error))\n        .then(respObj=>{\n           return console.log(respObj)\n        })\n    }\n\n    addBeachtoUBs = async (props) => {\n        const beach_id = await parseInt(props.beach.id)\n        // console.log(\"beach_id\", props.beach.id)\n        const user_id = this.state.loggedInUserId\n        const name = await props.beach.name\n        const userbeach = {beach_id:beach_id, user_id:user_id, name:name}\n        const url = \"https://mighty-ocean-78254.herokuapp.com/userbeaches\"\n        fetch(url, {method: 'POST',\n        body:JSON.stringify(userbeach),\n        headers: {'content-type':'application/json'}\n        }).then(res => res.json())\n        .catch(error=>console.error(\"Error:\", error))\n        .then(res => {\n            console.log('Success:',res)\n            let userbeaches = this.state.userbeaches\n            userbeaches.unshift(res)\n           this.setState({userbeaches:userbeaches})\n           props.history.push('/userbeaches')\n        })\n    }\n\n    deleteFromUBs = (beach) => {\n        const url = `https://mighty-ocean-78254.herokuapp.com/userbeaches/${beach.id}`\n        fetch(url, {method: 'DELETE'})\n        .then(res=>res.json())\n        .catch(error=>console.error(\"Error:\", error))\n        .then(respObj=>{\n            let userbeaches = this.state.userbeaches.filter(userbeach => userbeach.id !== beach.id)\n            this.setState({userbeaches:userbeaches})\n        })  \n    }\n    \n    \n    render() {  \n        return (\n            \n            <Router>\n            <div id=\"title\">\n                    CALIFORNIA BEACH FINDER\n            </div>\n                    <div>\n                        <div className=\"navbuttonscontainer\">\n                            <Link to=\"/\">\n                            <button className=\"roundbutton\">\n                            Beach Finder Mainpage</button>\n                            </Link>\n                            <Link to=\"/beachchart\">\n                            <button className=\"roundbutton\">\n                            Beach Data Chart</button>\n                            </Link>\n                            <Link to=\"/userbeaches\">\n                            <button className=\"roundbutton\">Favorite Beaches</button>\n                            </Link>\n                            <Link to=\"/reviews\">\n                            <button className=\"roundbutton\"\n                            >Reviews</button>\n                            </Link>\n\n                \n                    {!!this.state.token\n                                    ? <Login \n                                    token={this.state.token}\n                                    setToken={this.setToken}\n                                    loggedInUserId={this.state.loggedInUserId}/>\n                                    : <Login setToken={this.setToken}\n                                    />\n                    }\n                    <>\n                    {!!this.state.token\n                        ? <button className=\"roundbutton\" onClick={this.logOutClick}>Log Out</button>\n                        :\"\"\n                    }\n                    </>\n                    </div>\n\n\n\n                            <Route exact path={'/'} render= {(props) => \n                            <div id=\"search-bar\">\n                                        <SearchForm {...props} \n                                        grabBeaches={this.grabBeaches}\n                                        queryCode={this.queryCode}\n                            />\n                            </div>}\n                            />\n                            <Route exact path={'/'} render= {(props) => \n                                {return this.state.results.length === 0 \n                                ? \n                                <div id=\"map-showcase\">\n                                <MapContainer {...props} \n                                beaches={this.state.results} \n                                qLatLong={this.state.qLatLong}\n                                displayBeach={this.displayBeach}/>\n                                </div> \n                                :\n                                <div id=\"map-showcase\"> \n                                <MapContainer {...props}\n                                beaches={this.state.results} \n                                displayBeach={this.displayBeach}\n                                qLatLong={this.state.qLatLong}\n                            />\n                            {/* {console.log(\"this.state.qLatLong\", this.state.qLatLong)} */}\n                            </div>\n                            }\n                            }\n                            />\n\n                            <Route exact path={'/favbeach'} render= {(props) =>\n                        <div id=\"fav-beach\">\n                            <Favbeach id=\"favbeach\" {...props} \n                                beach={this.state.displayBeach}\n                                refreshBeaches={this.refreshBeaches}\n                                addBeachtoUBs={this.addBeachtoUBs}\n                                userBeaches={this.userBeaches}\n                            />\n                            </div>           \n                            }    \n                            /> \n\n                            <Route exact path={'/userbeaches'} render= {(props) => \n                            <div id=\"userbeaches\">\n                            <Userbeaches {...props}\n                            userbeaches={this.state.userbeaches}\n                            deleteFromUBs={this.deleteFromUBs}\n                            returnHome={this.returnHome}\n                            reviewBeach={this.reviewBeach}\n                            user_id={this.state.loggedInUserId}\n                            rawBeaches={this.state.rawBeaches}\n                            />\n                            </div>}\n                            />\n                            <Route exact path={'/reviews'} render= {(props) =>\n                            <div id=\"reviewform roundbutton\">\n                            <ReviewForm {...props}\n                                        displayBeach={this.state.displayBeach}\n                                        addReview={this.addReview}\n                                        returnHome={this.returnHome}\n                                        user_id={this.state.loggedInUserId}\n                            />\n                            </div>}\n                            />\n                            <Route exact path={'/reviews'} render={(props) =>\n                            <div id=\"reviews\">\n                            <Reviews {...props}\n                                    reviews={this.state.reviews}\n                                    beaches={this.state.results}\n                                    deleteReview={this.deleteReview}\n                                    updateReview={this.updateReview}\n                                    user_id={this.state.loggedInUserId}\n                            />\n                            </div>}\n                            />\n                            <Route exact path={'/beachchart'} render={(props) =>\n                            <div id=\"beachchart\">\n                            <Beachchart {...props}\n                            rawBeaches={this.state.rawBeaches}\n                            />\n                            </div>}\n                            />\n                        </div>\n        </Router>\n        )\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}